{% extends 'base.html' %}
{% load static %}

{% block title %}{{ course.title }} | LearnHub{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
<style>
    .course-progress-bar {
        position: fixed;
        top: 0;
        left: 0;
        height: 4px;
        background: linear-gradient(to right, #ffcc29, #003b71);
        z-index: 1000;
        width: 0%;
        transition: width 0.2s ease;
    }

    .module-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
    }

    .rating-stars .star {
        cursor: pointer;
        transition: transform 0.2s ease;
    }

    .rating-stars .star:hover {
        transform: scale(1.2);
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
        animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .highlight-badge {
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.05);
        }

        100% {
            transform: scale(1);
        }
    }

    .swiper {
        width: 100%;
        height: 100%;
    }

    .swiper-slide {
        text-align: center;
        background: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .swiper-pagination-bullet-active {
        background-color: #003b71;
    }
</style>
{% endblock %}

{% block content %}
<!-- Progress Bar -->
<div class="course-progress-bar" id="progressBar"></div>

<!-- Breadcrumb -->
<nav class="bg-gray-100 py-3">
    <div class="container mx-auto px-4">
        <ol class="list-none p-0 flex text-gray-600 text-sm">
            <li class="flex items-center">
                <a href="{% url 'home' %}" class="hover:text-primary transition-colors">Home</a>
                <svg class="w-3 h-3 mx-2 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
                    <path
                        d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z" />
                </svg>
            </li>
            <li class="flex items-center">
                <a href="{% url 'course_list' %}" class="hover:text-primary transition-colors">Cursos</a>
                <svg class="w-3 h-3 mx-2 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
                    <path
                        d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z" />
                </svg>
            </li>
            <li class="flex items-center">
                <a href="{% url 'course_list' %}?category={{ course.category.slug }}"
                    class="hover:text-primary transition-colors">{{ course.category.name }}</a>
                <svg class="w-3 h-3 mx-2 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
                    <path
                        d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z" />
                </svg>
            </li>
            <li class="text-primary font-medium">{{ course.title }}</li>
        </ol>
    </div>
</nav>

<!-- Course Header -->
<section class="bg-gradient-to-r from-primary to-primary-light text-white py-12">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
            <div data-aos="fade-right">
                <div class="flex items-center mb-4">
                    <span class="px-3 py-1 bg-secondary text-primary text-sm font-semibold rounded-full mr-3">
                        {{course.get_level_display }}</span>
                    <span class="px-3 py-1 bg-white bg-opacity-20 text-white text-sm font-semibold rounded-full">
                        {{course.category.name }}</span>
                </div>
                <h1 class="text-3xl md:text-4xl font-bold mb-4">{{ course.title }}</h1>
                <p class="text-lg opacity-90 mb-6">{{ course.short_description }}</p>

                <div class="flex flex-wrap items-center text-sm mb-6">
                    <div class="flex items-center mr-4 mb-2">
                        <div class="flex">
                            <div class="flex text-yellow-400 mb-1">
                                {{ average_rating.0|safe }}
                            </div>

                        </div>
                        <span class="ml-1">{{ average_rating.1|floatformat:1 }} ({{ total_reviews }} avaliações)</span>
                    </div>
                    <span class="mr-4 mb-2"><i class="fas fa-user-graduate mr-2"></i>{{ course.enrolled_students }}
                        alunos</span>
                    <span class="mr-4 mb-2"><i class="fas fa-clock mr-2"></i>{{ course.duration_in_weeks }}
                        semanas</span>
                    <span><i class="fas fa-globe mr-2"></i>Português</span>
                </div>

                <div class="flex items-center">
                    {% if course.instructor.profile_picture %}
                    <img src="{{ course.instructor.profile_picture.url }}" alt="{{ course.instructor.get_full_name }}"
                        class="w-10 h-10 rounded-full mr-3 border-2 border-white">
                    {% else %}
                    <div
                        class="w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-sm font-bold mr-3">
                        {{ course.instructor.first_name|first }}{{ course.instructor.last_name|first }}
                    </div>
                    {% endif %}
                    <div>
                        <p class="text-sm opacity-90">Criado por</p>
                        <p class="font-semibold">{{ course.instructor.get_full_name }}</p>
                    </div>
                </div>
                <div class="mt-4">
                    <a href="{% url 'course_attachments' course_slug=course.slug %}"
                        class="inline-flex items-center px-3 py-1 bg-white bg-opacity-20 text-white rounded-full hover:bg-opacity-30 transition-colors">
                        <i class="fas fa-paperclip mr-2"></i> Materiais do Curso
                        <span class="ml-2 bg-white text-primary text-xs px-2 py-1 rounded-full">
                            {{course.attachments.count }}</span>
                    </a>
                </div>
            </div>

            <div class="relative" data-aos="fade-left">
                <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow-xl">
                    {% if course.preview_video_url %}
                    <iframe src="{{ course.preview_video_url }}" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen class="absolute inset-0 w-full h-full"></iframe>
                    {% else %}
                    <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}"
                        class="absolute inset-0 w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-40">
                        <div
                            class="w-20 h-20 rounded-full bg-white bg-opacity-90 flex items-center justify-center cursor-pointer hover:bg-opacity-100 transition-all transform hover:scale-105">
                            <i class="fas fa-play text-primary text-3xl ml-1"></i>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<div class="container mx-auto px-4 py-16">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Course Details -->
        <div class="lg:col-span-2">
            <!-- Tabs Navigation -->
            <div class="mb-8 border-b border-gray-200">
                <div class="flex overflow-x-auto">
                    <button class="tab-button px-6 py-3 font-semibold text-gray-700 border-b-2 border-primary"
                        data-tab="overview">Visão Geral</button>
                    <button class="tab-button px-6 py-3 font-semibold text-gray-500 hover:text-gray-700"
                        data-tab="curriculum">Conteúdo</button>
                    <button class="tab-button px-6 py-3 font-semibold text-gray-500 hover:text-gray-700"
                        data-tab="instructor">Instrutor</button>
                    <button class="tab-button px-6 py-3 font-semibold text-gray-500 hover:text-gray-700"
                        data-tab="reviews">Avaliações</button>
                    <button class="tab-button px-6 py-3 font-semibold text-gray-500 hover:text-gray-700"
                        data-tab="projects">Projetos</button>
                    <button class="tab-button px-6 py-3 font-semibold text-gray-500 hover:text-gray-700"
                        data-tab="faq">FAQ</button>
                </div>
            </div>

            <!-- Tab Content -->
            <div class="tab-content active" id="overview">
                <div class="bg-white rounded-lg shadow-md p-6 mb-8" data-aos="fade-up">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Sobre este curso</h2>
                    <div class="prose max-w-none">
                        {{ course.description|safe }}
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6 mb-8" data-aos="fade-up" data-aos-delay="100">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">O que você aprenderá</h2>
                    <ul class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {% for learning_objective in course.learning_objectives.all %}
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span>{{ learning_objective.description }}</span>
                        </li>
                        {% empty %}
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span>Dominar os conceitos fundamentais da área</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span>Aplicar o conhecimento em projetos práticos</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span>Desenvolver habilidades técnicas avançadas</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-check-circle text-green-500 mt-1 mr-3"></i>
                            <span>Resolver problemas complexos com eficiência</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6 mb-8" data-aos="fade-up" data-aos-delay="200">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Requisitos</h2>
                    <ul class="list-disc pl-5 space-y-2">
                        {% for requirement in course.requirements.all %}
                        <li>{{ requirement.description }}</li>
                        {% empty %}
                        <li>Conhecimentos básicos de informática</li>
                        <li>Acesso a um computador com conexão à internet</li>
                        <li>Disposição para aprender e praticar</li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6 mb-8" data-aos="fade-up" data-aos-delay="300">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Para quem é este curso</h2>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <i class="fas fa-user-check text-primary mt-1 mr-3"></i>
                            <span>Iniciantes que desejam aprender do zero</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-user-check text-primary mt-1 mr-3"></i>
                            <span>Profissionais que buscam aprimorar suas habilidades</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-user-check text-primary mt-1 mr-3"></i>
                            <span>Estudantes que querem complementar seus estudos acadêmicos</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-user-check text-primary mt-1 mr-3"></i>
                            <span>Entusiastas que desejam expandir seus conhecimentos</span>
                        </li>
                    </ul>
                </div>

                <!-- Projetos dos Alunos -->
                <div class="bg-white rounded-lg shadow-md p-6" data-aos="fade-up" data-aos-delay="400">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Projetos dos Alunos</h2>
                    <p class="text-gray-600 mb-6">Veja o que nossos alunos estão criando com o conhecimento adquirido
                        neste curso.</p>

                    <div class="swiper student-projects-swiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">
                                <div class="bg-gray-100 rounded-lg overflow-hidden">
                                    <img src="https://via.placeholder.com/400x300?text=Projeto+1" alt="Projeto de Aluno"
                                        class="w-full h-48 object-cover">
                                    <div class="p-4">
                                        <h3 class="font-semibold text-gray-800">Projeto Avançado</h3>
                                        <p class="text-gray-600 text-sm">Por Maria Silva</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="bg-gray-100 rounded-lg overflow-hidden">
                                    <img src="https://via.placeholder.com/400x300?text=Projeto+2" alt="Projeto de Aluno"
                                        class="w-full h-48 object-cover">
                                    <div class="p-4">
                                        <h3 class="font-semibold text-gray-800">Aplicação Prática</h3>
                                        <p class="text-gray-600 text-sm">Por João Santos</p>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-slide">
                                <div class="bg-gray-100 rounded-lg overflow-hidden">
                                    <img src="https://via.placeholder.com/400x300?text=Projeto+3" alt="Projeto de Aluno"
                                        class="w-full h-48 object-cover">
                                    <div class="p-4">
                                        <h3 class="font-semibold text-gray-800">Solução Inovadora</h3>
                                        <p class="text-gray-600 text-sm">Por Ana Oliveira</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-pagination mt-4"></div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="curriculum">
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Conteúdo do curso</h2>
                        <div class="text-gray-600">
                            <span>{{ course.modules.count }} módulos</span> •
                            <span>{{ course.total_lessons }} aulas</span> •
                            <span>{{ course.total_duration }} horas no total</span>
                        </div>
                    </div>

                    <div class="space-y-4">
                        {% for module in course.modules.all %}
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-4 py-3 flex justify-between items-center cursor-pointer module-header"
                                data-module-id="{{ module.id }}">
                                <div class="flex items-center">
                                    <i class="fas fa-folder text-primary mr-3"></i>
                                    <h3 class="text-lg font-semibold text-gray-800">{{ module.title }}</h3>
                                </div>
                                <div class="flex items-center">
                                    <span class="text-sm text-gray-600 mr-4">{{ module.lessons.count }} aulas</span>
                                    <i class="fas fa-chevron-down text-gray-600 transition-transform"></i>
                                </div>
                            </div>
                            <div class="module-content" id="module-content-{{ module.id }}">
                                <ul class="divide-y divide-gray-200">
                                    {% for lesson in module.lessons.all %}
                                    <li class="px-4 py-3 hover:bg-gray-50 transition-colors">
                                        <div class="flex items-center">
                                            {% if lesson.is_free %}
                                            <i class="fas fa-play-circle text-green-500 mr-3"></i>
                                            {% else %}
                                            <i class="fas fa-lock text-gray-400 mr-3"></i>
                                            {% endif %}
                                            <div class="flex-grow">
                                                <p class="font-medium text-gray-800">{{ lesson.title }}</p>
                                                {% if lesson.description %}
                                                <p class="text-sm text-gray-600">{{ lesson.description|truncatechars:100
                                                    }}</p>
                                                {% endif %}
                                            </div>
                                            <div class="flex items-center">
                                                {% if lesson.is_free %}
                                                <span
                                                    class="px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded mr-3">Aula
                                                    Gratuita</span>
                                                {% endif %}
                                                <span class="text-sm text-gray-500">{{ lesson.duration_in_minutes }}
                                                    min</span>
                                            </div>
                                        </div>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        {% empty %}
                        <div class="text-center py-8">
                            <i class="fas fa-book-open text-gray-300 text-5xl mb-4"></i>
                            <p class="text-gray-500">O conteúdo deste curso está sendo preparado.</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="tab-content" id="instructor">
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <div class="flex flex-col md:flex-row">
                        <div class="md:w-1/3 mb-6 md:mb-0 flex flex-col items-center">
                            {% if course.instructor.profile_picture %}
                            <img src="{{ course.instructor.profile_picture.url }}"
                                alt="{{ course.instructor.get_full_name }}"
                                class="w-40 h-40 rounded-full mb-4 border-4 border-gray-100 shadow-md">
                            {% else %}
                            <div
                                class="w-40 h-40 rounded-full bg-primary text-white flex items-center justify-center text-5xl font-bold mb-4 border-4 border-gray-100 shadow-md">
                                {{ course.instructor.first_name|first }}{{ course.instructor.last_name|first }}
                            </div>
                            {% endif %}
                            <h3 class="text-xl font-semibold text-gray-800 text-center">
                                {{ course.instructor.get_full_name }}</h3>
                            <p class="text-gray-600 text-center">{{ course.instructor.title|default:"Especialista" }}
                            </p>

                            <div class="flex mt-4 space-x-3">
                                {% if course.instructor.linkedin_url %}
                                <a href="{{ course.instructor.linkedin_url }}" target="_blank"
                                    class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center hover:bg-blue-700 transition-colors">
                                    <i class="fab fa-linkedin-in"></i>
                                </a>
                                {% endif %}
                                {% if course.instructor.twitter_url %}
                                <a href="{{ course.instructor.twitter_url }}" target="_blank"
                                    class="w-10 h-10 rounded-full bg-blue-400 text-white flex items-center justify-center hover:bg-blue-500 transition-colors">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                {% endif %}
                                {% if course.instructor.website_url %}
                                <a href="{{ course.instructor.website_url }}" target="_blank"
                                    class="w-10 h-10 rounded-full bg-gray-700 text-white flex items-center justify-center hover:bg-gray-800 transition-colors">
                                    <i class="fas fa-globe"></i>
                                </a>
                                {% endif %}
                            </div>
                        </div>

                        <div class="md:w-2/3 md:pl-8">
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div class="bg-gray-50 rounded-lg p-4 text-center">
                                    <div class="text-3xl font-bold text-primary mb-1">
                                        {{ instructor.total_courses|default:"10+" }}</div>
                                    <div class="text-gray-600">Cursos</div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4 text-center">
                                    <div class="text-3xl font-bold text-primary mb-1">
                                        {{instructor.total_students|default:"1000+" }}</div>
                                    <div class="text-gray-600">Alunos</div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4 text-center">
                                    <div class="text-3xl font-bold text-primary mb-1">
                                        {{instructor.total_rating|default:"4.8" }}</div>
                                    <div class="text-gray-600">Avaliação Média</div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-4 text-center">
                                    <div class="text-3xl font-bold text-primary mb-1">
                                        {{ instructor.years_experience|default:"5+" }}</div>
                                    <div class="text-gray-600">Anos de Experiência</div>
                                </div>
                            </div>

                            <h4 class="text-lg font-semibold text-gray-800 mb-3">Sobre o Instrutor</h4>
                            <div class="prose max-w-none">
                                <p>{{ course.instructor.bio }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Outros cursos do instrutor -->
                <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Outros cursos deste instrutor</h3>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
                        {% for course in instructor_courses %}
                        <div
                            class="flex flex-col sm:flex-row border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300">
                            <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}"
                                class="w-full sm:w-32 h-48 sm:h-auto object-cover">
                            <div class="p-3 sm:p-4 flex-1 flex flex-col justify-between">
                                <div>
                                    <h4 class="font-semibold text-gray-800 mb-1 line-clamp-2">{{ course.title }}</h4>
                                    <div class="flex items-center text-sm text-yellow-500 mb-1">
                                        {{ course.html_rating_stars.0|safe }}
                                        <span class="text-gray-600 ml-1">({{course.get_review_count}})</span>
                                    </div>
                                </div>

                                <div>
                                    {% if course.discount_price %}
                                    <div class="flex flex-wrap items-center mb-2">
                                        <div class="text-2xl sm:text-3xl text-primary">
                                            HTG {{course.discount_price|floatformat:2 }}</div>
                                        <div class="text-base sm:text-lg text-gray-500 line-through ml-2">
                                            HTG {{course.price|floatformat:2 }}</div>
                                    </div>
                                    <div class="flex flex-wrap items-center mb-3">
                                        <span class="text-green-600 font-semibold text-sm sm:text-base">
                                            {{ course.discount_percentage }}% de desconto!</span>
                                        <div
                                            class="mt-1 sm:mt-0 sm:ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded highlight-badge">
                                            <i class="far fa-clock mr-1"></i> Oferta termina em <span
                                                id="countdown">23:59:59</span>
                                        </div>
                                    </div>
                                    {% else %}
                                    <div class="text-2xl sm:text-3xl text-primary mb-3">
                                        HTG {{ course.price|floatformat:2}}
                                    </div>
                                    {% endif %}

                                    <a href="{% url 'course_detail' course.slug %}"
                                        class="inline-block px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors duration-300 text-sm sm:text-base font-medium">
                                        Ver curso
                                    </a>
                                </div>
                            </div>
                        </div>
                        {% empty %}
                        <div
                            class="flex flex-col sm:flex-row border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300">
                            <img src="https://via.placeholder.com/150x100?text=Curso" alt="Curso"
                                class="w-full sm:w-32 h-48 sm:h-auto object-cover">
                            <div class="p-3 sm:p-4 flex-1 flex flex-col justify-between">
                                <div>
                                    <h4 class="font-semibold text-gray-800 mb-1 line-clamp-2">Curso Avançado</h4>
                                    <div class="flex items-center text-sm text-yellow-500 mb-1">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                        <span class="text-gray-600 ml-1">(120)</span>
                                    </div>
                                </div>

                                <div>
                                    <div class="text-2xl sm:text-3xl text-primary mb-3">HTG 89,90</div>
                                    <a href="#"
                                        class="inline-block px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors duration-300 text-sm sm:text-base font-medium">
                                        Ver curso
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div
                            class="flex flex-col sm:flex-row border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300">
                            <img src="https://via.placeholder.com/150x100?text=Curso" alt="Curso"
                                class="w-full sm:w-32 h-48 sm:h-auto object-cover">
                            <div class="p-3 sm:p-4 flex-1 flex flex-col justify-between">
                                <div>
                                    <h4 class="font-semibold text-gray-800 mb-1 line-clamp-2">Curso Especializado</h4>
                                    <div class="flex items-center text-sm text-yellow-500 mb-1">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="far fa-star"></i>
                                        <span class="text-gray-600 ml-1">(85)</span>
                                    </div>
                                </div>

                                <div>
                                    <div class="text-2xl sm:text-3xl text-primary mb-3">HTG 79,90</div>
                                    <a href="#"
                                        class="inline-block px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors duration-300 text-sm sm:text-base font-medium">
                                        Ver curso
                                    </a>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="tab-content" id="reviews">
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <div class="flex flex-col md:flex-row items-start mb-8">
                        <div class="md:w-1/3 mb-6 md:mb-0">
                            <h3 class="text-xl font-semibold text-gray-800 mb-4">Avaliações dos Alunos</h3>
                            <div class="flex items-center mb-2">
                                <div class="text-4xl font-bold text-primary mr-2">{{ average_rating.1 }}
                                </div>
                                <div>
                                    <div class="flex text-yellow-400 mb-1">
                                        {{average_rating.0|safe }}
                                    </div>

                                    <div class="text-gray-600">{{total_reviews }} avaliações</div>
                                </div>
                            </div>

                            <div class="space-y-2">
                                {% with distribution=rating_distribution %}
                                <div class="flex items-center">
                                    <div class="w-24 text-sm text-gray-600">5 estrelas</div>
                                    <div class="flex-grow h-2 bg-gray-200 rounded-full mr-2">
                                        <div class="h-2 bg-yellow-400 rounded-full"
                                            style="width: {{ distribution.5 }}%"></div>
                                    </div>
                                    <div class="text-sm text-gray-600">{{ distribution.5 }}%</div>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-24 text-sm text-gray-600">4 estrelas</div>
                                    <div class="flex-grow h-2 bg-gray-200 rounded-full mr-2">
                                        <div class="h-2 bg-yellow-400 rounded-full"
                                            style="width: {{ distribution.4 }}%"></div>
                                    </div>
                                    <div class="text-sm text-gray-600">{{ distribution.4 }}%</div>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-24 text-sm text-gray-600">3 estrelas</div>
                                    <div class="flex-grow h-2 bg-gray-200 rounded-full mr-2">
                                        <div class="h-2 bg-yellow-400 rounded-full"
                                            style="width: {{ distribution.3 }}%"></div>
                                    </div>
                                    <div class="text-sm text-gray-600">{{ distribution.3 }}%</div>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-24 text-sm text-gray-600">2 estrelas</div>
                                    <div class="flex-grow h-2 bg-gray-200 rounded-full mr-2">
                                        <div class="h-2 bg-yellow-400 rounded-full"
                                            style="width: {{ distribution.2 }}%"></div>
                                    </div>
                                    <div class="text-sm text-gray-600">{{ distribution.2 }}%</div>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-24 text-sm text-gray-600">1 estrela</div>
                                    <div class="flex-grow h-2 bg-gray-200 rounded-full mr-2">
                                        <div class="h-2 bg-yellow-400 rounded-full"
                                            style="width: {{ distribution.1 }}%"></div>
                                    </div>
                                    <div class="text-sm text-gray-600">{{ distribution.1 }}%</div>
                                </div>
                                {% endwith %}
                            </div>
                        </div>

                        <div class="md:w-2/3 md:pl-8">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-semibold text-gray-800">Deixe sua avaliação</h3>
                                {% if user.is_authenticated %}
                                {% if user_has_reviewed %}
                                <a href="{% url 'edit_review' course_slug=course.slug %}"
                                    class="text-primary hover:underline">
                                    <i class="fas fa-edit mr-1"></i> Editar sua avaliação
                                </a>
                                {% endif %}
                                {% endif %}
                            </div>

                            {% if user.is_authenticated %}
                            {% if user_has_reviewed %}
                            <div class="bg-gray-50 rounded-lg p-4 mb-4">
                                <p class="text-gray-600">Você já avaliou este curso. Obrigado pelo seu feedback!</p>
                            </div>
                            {% else %}
                            {% if user_is_enrolled %}
                            <form action="{% url 'add_review' course_slug=course.slug %}" method="post"
                                class="space-y-4">
                                {% csrf_token %}
                                <div>
                                    <label class="block text-gray-700 mb-2">Sua classificação</label>
                                    <div class="flex rating-stars text-3xl text-gray-300">
                                        <span class="star cursor-pointer" data-rating="1"><i
                                                class="far fa-star"></i></span>
                                        <span class="star cursor-pointer" data-rating="2"><i
                                                class="far fa-star"></i></span>
                                        <span class="star cursor-pointer" data-rating="3"><i
                                                class="far fa-star"></i></span>
                                        <span class="star cursor-pointer" data-rating="4"><i
                                                class="far fa-star"></i></span>
                                        <span class="star cursor-pointer" data-rating="5"><i
                                                class="far fa-star"></i></span>
                                        <input type="hidden" name="rating" id="rating-value" value="">
                                    </div>
                                </div>
                                <div>
                                    <label for="review-title" class="block text-gray-700 mb-2">Título da
                                        avaliação</label>
                                    <input type="text" id="review-title" name="title"
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
                                </div>
                                <div>
                                    <label for="review-content" class="block text-gray-700 mb-2">Sua avaliação</label>
                                    <textarea id="review-content" name="comment" rows="4"
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"></textarea>
                                </div>
                                <button type="submit"
                                    class="px-6 py-2 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg transition-colors">
                                    Enviar Avaliação
                                </button>
                            </form>
                            {% else %}
                            <div class="bg-gray-50 rounded-lg p-4 mb-4">
                                <p class="text-gray-600">Você precisa estar matriculado neste curso para deixar uma
                                    avaliação.</p>
                            </div>
                            {% endif %}
                            {% endif %}
                            {% else %}
                            <div class="bg-gray-50 rounded-lg p-4 mb-4">
                                <p class="text-gray-600">Faça login para deixar uma avaliação.</p>
                                <a href="{% url 'login' %}?next={{ request.path }}"
                                    class="text-primary hover:underline">Fazer login</a>
                            </div>
                            {% endif %}

                            <div class="border-t border-gray-200 pt-8 mt-6">
                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-xl font-semibold text-gray-800">Comentários dos Alunos</h3>
                                    <a href="{% url 'course_reviews' course_slug=course.slug %}"
                                        class="text-primary hover:underline">
                                        Ver todas as avaliações
                                    </a>
                                </div>

                                <div class="space-y-6">
                                    {% for review in recent_reviews %}
                                    <div class="bg-gray-50 rounded-lg p-4">
                                        <div class="flex items-start">
                                            <div class="flex-shrink-0 mr-4">
                                                {% if review.user.profile_picture %}
                                                <img src="{{ review.user.profile_picture.url }}"
                                                    alt="{{ review.user.get_full_name }}"
                                                    class="w-12 h-12 rounded-full">
                                                {% else %}
                                                <div
                                                    class="w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold">
                                                    {{ review.user.first_name|first }}{{ review.user.last_name|first }}
                                                </div>
                                                {% endif %}
                                            </div>
                                            <div class="flex-grow">
                                                <div class="flex items-center mb-1">
                                                    <h4 class="font-semibold text-gray-800 mr-2">
                                                        {{ review.user.get_full_name }}</h4>
                                                    <span class="text-gray-500 text-sm">
                                                        {{ review.created_at|timesince}} atrás</span>
                                                </div>
                                                <div class="flex text-yellow-400 mb-2">
                                                    {% for i in "12345" %}
                                                    {% if forloop.counter <= review.rating %} <i class="fas fa-star">
                                                        </i>
                                                        {% else %}
                                                        <i class="far fa-star"></i>
                                                        {% endif %}
                                                        {% endfor %}
                                                </div>
                                                <h5 class="font-medium text-gray-800 mb-2">{{ review.title }}</h5>
                                                <p class="text-gray-600">{{ review.comment }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    {% empty %}
                                    <div class="text-center py-8">
                                        <i class="fas fa-comments text-gray-300 text-5xl mb-4"></i>
                                        <p class="text-gray-500">Ainda não há avaliações para este curso.</p>
                                        <p class="text-gray-600 mt-2">Seja o primeiro a avaliar!</p>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="projects">
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Projetos dos Alunos</h2>
                        <a href="" class="text-primary hover:underline">
                            Ver todos os projetos
                        </a>
                    </div>

                    <p class="text-gray-600 mb-8">Veja o que nossos alunos estão criando com o conhecimento adquirido
                        neste curso.</p>

                    {% if featured_projects %}
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        {% for project in featured_projects %}
                        <div class="bg-gray-50 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                            <div class="aspect-w-16 aspect-h-9">
                                <img src="{{ project.image.url }}" alt="{{ project.title }}"
                                    class="object-cover w-full h-full">
                            </div>
                            <div class="p-4">
                                <div class="flex items-center mb-2">
                                    {% if project.is_featured %}
                                    <span
                                        class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-semibold rounded mr-2">
                                        <i class="fas fa-star mr-1"></i> Destaque
                                    </span>
                                    {% endif %}
                                    <h3 class="font-semibold text-gray-800">{{ project.title }}</h3>
                                </div>
                                <p class="text-gray-600 text-sm mb-3">{{ project.description|truncatewords:15 }}</p>
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        {% if project.user.profile_picture %}
                                        <img src="{{ project.user.profile_picture.url }}"
                                            alt="{{ project.user.get_full_name }}" class="w-8 h-8 rounded-full mr-2">
                                        {% else %}
                                        <div
                                            class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-xs font-bold mr-2">
                                            {{ project.user.first_name|first }}{{ project.user.last_name|first }}
                                        </div>
                                        {% endif %}
                                        <span class="text-sm text-gray-600">{{ project.user.get_full_name }}</span>
                                    </div>
                                    {% if project.project_url %}
                                    <a href="{{ project.project_url }}" target="_blank"
                                        class="text-primary hover:underline text-sm">
                                        <i class="fas fa-external-link-alt mr-1"></i> Ver
                                    </a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <div class="text-center">
                        <a href="{% url 'course_projects' course_slug=course.slug %}"
                            class="px-6 py-2 border border-primary text-primary hover:bg-primary hover:text-white font-semibold rounded-lg transition-colors">
                            Ver Mais Projetos
                        </a>
                    </div>
                    {% else %}
                    <div class="text-center py-12">
                        <i class="fas fa-project-diagram text-gray-300 text-5xl mb-4"></i>
                        <p class="text-gray-500 mb-4">Ainda não há projetos para este curso.</p>
                        {% if user.is_authenticated and user_is_enrolled %}
                        <a href="#"
                            class="px-6 py-2 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg transition-colors">
                            Enviar Seu Projeto
                        </a>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="tab-content" id="faq">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Perguntas Frequentes</h2>

                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div
                                class="bg-gray-50 px-4 py-3 flex justify-between items-center cursor-pointer faq-header">
                                <h3 class="font-semibold text-gray-800">Preciso ter conhecimento prévio para fazer este
                                    curso?</h3>
                                <i class="fas fa-chevron-down text-gray-600 transition-transform"></i>
                            </div>
                            <div class="faq-content hidden px-4 py-3">
                                <p class="text-gray-600">Não, este curso foi projetado para atender desde iniciantes até
                                    pessoas com conhecimento intermediário. Explicamos todos os conceitos do básico ao
                                    avançado.</p>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div
                                class="bg-gray-50 px-4 py-3 flex justify-between items-center cursor-pointer faq-header">
                                <h3 class="font-semibold text-gray-800">Por quanto tempo terei acesso ao curso?</h3>
                                <i class="fas fa-chevron-down text-gray-600 transition-transform"></i>
                            </div>
                            <div class="faq-content hidden px-4 py-3">
                                <p class="text-gray-600">Você terá acesso vitalício ao curso, incluindo todas as
                                    atualizações futuras sem custo adicional.</p>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div
                                class="bg-gray-50 px-4 py-3 flex justify-between items-center cursor-pointer faq-header">
                                <h3 class="font-semibold text-gray-800">O certificado é reconhecido pelo mercado?</h3>
                                <i class="fas fa-chevron-down text-gray-600 transition-transform"></i>
                            </div>
                            <div class="faq-content hidden px-4 py-3">
                                <p class="text-gray-600">Sim, nossos certificados são reconhecidos pelo mercado e podem
                                    ser adicionados ao seu currículo e perfil do LinkedIn. Eles atestam suas habilidades
                                    e conhecimentos adquiridos.</p>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div
                                class="bg-gray-50 px-4 py-3 flex justify-between items-center cursor-pointer faq-header">
                                <h3 class="font-semibold text-gray-800">Posso assistir às aulas no celular?</h3>
                                <i class="fas fa-chevron-down text-gray-600 transition-transform"></i>
                            </div>
                            <div class="faq-content hidden px-4 py-3">
                                <p class="text-gray-600">Sim, nossa plataforma é totalmente responsiva. Você pode
                                    assistir às aulas em qualquer dispositivo: computador, tablet ou smartphone.</p>
                            </div>
                        </div>

                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div
                                class="bg-gray-50 px-4 py-3 flex justify-between items-center cursor-pointer faq-header">
                                <h3 class="font-semibold text-gray-800">Existe suporte para dúvidas durante o curso?
                                </h3>
                                <i class="fas fa-chevron-down text-gray-600 transition-transform"></i>
                            </div>
                            <div class="faq-content hidden px-4 py-3">
                                <p class="text-gray-600">Sim, oferecemos suporte completo através dos comentários nas
                                    aulas e de nossa comunidade exclusiva. O instrutor e a equipe de suporte estão
                                    sempre disponíveis para ajudar.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="lg:col-span-1">
            <div class="bg-white rounded-lg shadow-md sticky top-24">
                <div class="p-6 border-b border-gray-200">
                    {% if course.discount_price %}
                    <div class="flex items-center mb-2">
                        <div class="text-3xl font-bold text-primary">HTG {{ course.discount_price|floatformat:2 }}</div>
                        <div class="text-lg text-gray-500 line-through ml-2">HTG {{ course.price|floatformat:2 }}</div>
                    </div>
                    <div class="flex items-center mb-4">
                        <span class="text-green-600 font-semibold">{{ course.discount_percentage }}% de desconto!</span>
                        <div
                            class="ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs font-semibold rounded highlight-badge">
                            <i class="far fa-clock mr-1"></i> Oferta termina em <span id="countdown">23:59:59</span>
                        </div>
                    </div>
                    {% else %}
                    <div class="text-3xl font-bold text-primary mb-4">HTG {{ course.price|floatformat:2 }}</div>
                    {% endif %}

                    {% if not user_is_enrolled %}
                    <a href="{% url 'enroll_course' course.slug %}"
                        class="block w-full bg-primary hover:bg-primary-dark text-white text-center font-semibold py-3 rounded-lg transition-colors mb-4 transform hover:scale-105">
                        Inscreva-se Agora
                    </a>
                    {% else %}
                    <a href="{% url 'course_learn' course.slug %}"
                        class="block w-full bg-primary hover:bg-primary-dark text-white text-center font-semibold py-3 rounded-lg transition-colors mb-4 transform hover:scale-105">
                        Continuar Estudando
                    </a>
                    {% endif %}

                    <div class="text-center text-gray-600 mb-6">30 dias de garantia de devolução do dinheiro</div>

                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Este curso inclui:</h3>
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-center">
                            <i class="fas fa-video text-primary mr-3"></i>
                            <span>{{ course.total_video_hours|default:"20+" }} horas de vídeo sob demanda</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-file-alt text-primary mr-3"></i>
                            <span>{{ course.num_articles|default:"15+" }} artigos e recursos</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-download text-primary mr-3"></i>
                            <span>{{ course.num_downloadable_resources|default:"10+" }} recursos para download</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-project-diagram text-primary mr-3"></i>
                            <span>{{ course.num_projects|default:"5+" }} projetos práticos</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-infinity text-primary mr-3"></i>
                            <span>Acesso vitalício</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-mobile-alt text-primary mr-3"></i>
                            <span>Acesso no celular e TV</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-certificate text-primary mr-3"></i>
                            <span>Certificado de conclusão</span>
                        </li>
                    </ul>
                </div>

                <div class="p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Compartilhe este curso</h3>
                    <div class="flex justify-center space-x-4">
                        <a href="#"
                            class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center hover:bg-blue-700 transition-colors">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 rounded-full bg-blue-400 text-white flex items-center justify-center hover:bg-blue-500 transition-colors">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 rounded-full bg-blue-700 text-white flex items-center justify-center hover:bg-blue-800 transition-colors">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="#"
                            class="w-10 h-10 rounded-full bg-green-600 text-white flex items-center justify-center hover:bg-green-700 transition-colors">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>

                <div class="p-6 border-t border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Cupom de desconto</h3>
                    <div class="flex">
                        <input type="text" placeholder="Digite o código"
                            class="flex-grow px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-1 focus:ring-primary">
                        <button
                            class="px-4 py-2 bg-primary text-white font-semibold rounded-r-lg hover:bg-primary-dark transition-colors">
                            Aplicar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Related Courses -->
<section class="bg-gray-50 py-16">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Cursos Relacionados</h2>

        <div class="swiper related-courses-swiper">
            <div class="swiper-wrapper">
                {% for course in related_courses %}
                <div class="swiper-slide p-2">
                    <div class="course-card bg-white rounded-xl shadow-md overflow-hidden h-full">
                        <img src="{{ course.thumbnail.url }}" class="w-full h-48 object-cover" alt="{{ course.title }}">
                            
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-3">
                                <span
                                    class="px-3 py-1 bg-primary text-white text-xs font-semibold rounded-full">{{course.get_level_display}}</span>
                                <span class="text-gray-600 text-sm"><i class="far fa-clock mr-1"></i>
                                {{course.duration_in_weeks }} semanas
                            </span>
                            </div>
                            <h5 class="text-xl font-bold text-gray-800 mb-2">{{course.title}}</h5>
                            <p class="text-gray-600 text-sm mb-4">{{course.short_description}}</p>
                               
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-primary font-bold">HTG
                                        {% if course.discount_price %}
                                        {{ course.discount_price }}
                                        {% else %}
                                        {{ course.price }}
                                        {% endif %}
                                    </span>
                                        
                                    </span>
                                </div>
                                <a href="#"
                                    class="py-2 px-4 bg-secondary hover:bg-secondary-dark text-primary font-semibold rounded-lg transition-colors">Ver
                                    Curso</a>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty%}

                <div class="swiper-slide p-2">
                    <div class="course-card bg-white rounded-xl shadow-md overflow-hidden h-full">
                        <img src="https://via.placeholder.com/400x200?text=Curso+Relacionado+1"
                            class="w-full h-48 object-cover" alt="Curso Relacionado">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-3">
                                <span
                                    class="px-3 py-1 bg-primary text-white text-xs font-semibold rounded-full">Intermediário</span>
                                <span class="text-gray-600 text-sm"><i class="far fa-clock mr-1"></i>6 semanas</span>
                            </div>
                            <h5 class="text-xl font-bold text-gray-800 mb-2">Curso Relacionado 1</h5>
                            <p class="text-gray-600 text-sm mb-4">Descrição breve do curso relacionado com informações
                                relevantes.</p>
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-primary font-bold">HTG 69,90</span>
                                </div>
                                <a href="#"
                                    class="py-2 px-4 bg-secondary hover:bg-secondary-dark text-primary font-semibold rounded-lg transition-colors">Ver
                                    Curso</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="swiper-slide p-2">
                    <div class="course-card bg-white rounded-xl shadow-md overflow-hidden h-full">
                        <img src="https://via.placeholder.com/400x200?text=Curso+Relacionado+2"
                            class="w-full h-48 object-cover" alt="Curso Relacionado">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-3">
                                <span
                                    class="px-3 py-1 bg-primary text-white text-xs font-semibold rounded-full">Avançado</span>
                                <span class="text-gray-600 text-sm"><i class="far fa-clock mr-1"></i>8 semanas</span>
                            </div>
                            <h5 class="text-xl font-bold text-gray-800 mb-2">Curso Relacionado 2</h5>
                            <p class="text-gray-600 text-sm mb-4">Descrição breve do curso relacionado com informações
                                relevantes.</p>
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-primary font-bold">HTG 89,90</span>
                                </div>
                                <a href="#"
                                    class="py-2 px-4 bg-secondary hover:bg-secondary-dark text-primary font-semibold rounded-lg transition-colors">Ver
                                    Curso</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="swiper-slide p-2">
                    <div class="course-card bg-white rounded-xl shadow-md overflow-hidden h-full">
                        <img src="https://via.placeholder.com/400x200?text=Curso+Relacionado+3"
                            class="w-full h-48 object-cover" alt="Curso Relacionado">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-3">
                                <span
                                    class="px-3 py-1 bg-primary text-white text-xs font-semibold rounded-full">Iniciante</span>
                                <span class="text-gray-600 text-sm"><i class="far fa-clock mr-1"></i>4 semanas</span>
                            </div>
                            <h5 class="text-xl font-bold text-gray-800 mb-2">Curso Relacionado 3</h5>
                            <p class="text-gray-600 text-sm mb-4">Descrição breve do curso relacionado com informações
                                relevantes.</p>
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-primary font-bold">HTG 59,90</span>
                                </div>
                                <a href="#"
                                    class="py-2 px-4 bg-secondary hover:bg-secondary-dark text-primary font-semibold rounded-lg transition-colors">Ver
                                    Curso</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="swiper-slide p-2">
                    <div class="course-card bg-white rounded-xl shadow-md overflow-hidden h-full">
                        <img src="https://via.placeholder.com/400x200?text=Curso+Relacionado+4"
                            class="w-full h-48 object-cover" alt="Curso Relacionado">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-3">
                                <span
                                    class="px-3 py-1 bg-primary text-white text-xs font-semibold rounded-full">Intermediário</span>
                                <span class="text-gray-600 text-sm"><i class="far fa-clock mr-1"></i>5 semanas</span>
                            </div>
                            <h5 class="text-xl font-bold text-gray-800 mb-2">Curso Relacionado 4</h5>
                            <p class="text-gray-600 text-sm mb-4">Descrição breve do curso relacionado com informações
                                relevantes.</p>
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-primary font-bold">HTG 79,90</span>
                                </div>
                                <a href="#"
                                    class="py-2 px-4 bg-secondary hover:bg-secondary-dark text-primary font-semibold rounded-lg transition-colors">Ver
                                    Curso</a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="swiper-pagination mt-6"></div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Progress Bar
        window.addEventListener('scroll', function () {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('progressBar').style.width = scrolled + '%';
        });

        // Tabs
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons and contents
                tabButtons.forEach(btn => {
                    btn.classList.remove('border-primary', 'text-gray-700');
                    btn.classList.add('text-gray-500');
                });
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });

                // Add active class to clicked button and corresponding content
                button.classList.add('border-primary', 'text-gray-700');
                button.classList.remove('text-gray-500');
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Module Accordions
        const moduleHeaders = document.querySelectorAll('.module-header');
        moduleHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const moduleId = header.getAttribute('data-module-id');
                const content = document.getElementById('module-content-' + moduleId);
                const icon = header.querySelector('i');

                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                    icon.classList.remove('transform', 'rotate-180');
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                    icon.classList.add('transform', 'rotate-180');
                }
            });
        });

        // FAQ Accordions
        const faqHeaders = document.querySelectorAll('.faq-header');
        faqHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const icon = header.querySelector('i');

                if (content.classList.contains('hidden')) {
                    content.classList.remove('hidden');
                    icon.classList.add('transform', 'rotate-180');
                } else {
                    content.classList.add('hidden');
                    icon.classList.remove('transform', 'rotate-180');
                }
            });
        });

        // Rating Stars
        const stars = document.querySelectorAll('.rating-stars .star');
        const ratingInput = document.getElementById('rating-value');

        stars.forEach(star => {
            star.addEventListener('mouseover', () => {
                const rating = parseInt(star.getAttribute('data-rating'));
                highlightStars(rating);
            });

            star.addEventListener('mouseout', () => {
                resetStars();
            });

            star.addEventListener('click', () => {
                const rating = parseInt(star.getAttribute('data-rating'));
                setRating(rating);
                if (ratingInput) {
                    ratingInput.value = rating;
                }
            });
        });

        function highlightStars(rating) {
            stars.forEach(star => {
                const starRating = parseInt(star.getAttribute('data-rating'));
                if (starRating <= rating) {
                    star.innerHTML = '<i class="fas fa-star text-yellow-400"></i>';
                } else {
                    star.innerHTML = '<i class="far fa-star"></i>';
                }
            });
        }

        function resetStars() {
            const currentRating = document.querySelector('.rating-stars').getAttribute('data-current-rating') || 0;
            stars.forEach(star => {
                const starRating = parseInt(star.getAttribute('data-rating'));
                if (starRating <= currentRating) {
                    star.innerHTML = '<i class="fas fa-star text-yellow-400"></i>';
                } else {
                    star.innerHTML = '<i class="far fa-star"></i>';
                }
            });
        }

        function setRating(rating) {
            document.querySelector('.rating-stars').setAttribute('data-current-rating', rating);
            resetStars();
        }

        // Countdown Timer
        function startCountdown() {
            const countdownElement = document.getElementById('countdown');
            if (!countdownElement) return;

            let hours = 23;
            let minutes = 59;
            let seconds = 59;

            const countdownInterval = setInterval(() => {
                seconds--;

                if (seconds < 0) {
                    seconds = 59;
                    minutes--;
                }

                if (minutes < 0) {
                    minutes = 59;
                    hours--;
                }

                if (hours < 0) {
                    clearInterval(countdownInterval);
                    countdownElement.textContent = "Oferta expirada";
                    return;
                }

                countdownElement.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        startCountdown();

        // Initialize Swiper
        const studentProjectsSwiper = new Swiper('.student-projects-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            pagination: {
                el: '.student-projects-swiper .swiper-pagination',
                clickable: true,
            },
            breakpoints: {
                640: {
                    slidesPerView: 2,
                },
                1024: {
                    slidesPerView: 3,
                },
            },
        });

        const relatedCoursesSwiper = new Swiper('.related-courses-swiper', {
            slidesPerView: 1,
            spaceBetween: 20,
            pagination: {
                el: '.related-courses-swiper .swiper-pagination',
                clickable: true,
            },
            breakpoints: {
                640: {
                    slidesPerView: 2,
                },
                1024: {
                    slidesPerView: 3,
                },
                1280: {
                    slidesPerView: 4,
                },
            },
        });
    });
</script>
{% endblock %}